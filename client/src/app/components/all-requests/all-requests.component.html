<div class="table-responsive-xl root">
  <div id="filter-drawer">
    <h3>Filters</h3>
    <form [formGroup]="properties.formGroup" novalidate class="form" (submit)="onSubmit()">
      <div class="form-group un-sm un-md">
        <label for="inputSkill">Skill Center</label>
        <select class="custom-select" id="inputSkill" formControlName="skill">
          <option disabled value=""></option>
          <option *ngFor="let skill of properties.skills" [value]="skill">{{skill}}</option>
        </select>
      </div>
      <div class="form-group un-sm un-md">
        <label for="inputState">State</label>
        <select class="custom-select" id="inputState" formControlName="state">
          <option disabled value=""></option>
          <option *ngFor="let state of properties.states" [value]="state">{{state}}</option>
        </select>
      </div>
      <div class="form-group un-sm un-md">
        <label for="inputStateCsl">CSL State</label>
        <select class="custom-select" id="inputStateCsl" formControlName="stateCsl">
          <option disabled value=""></option>
          <option *ngFor="let stateCsl of properties.statesCsl" [value]="stateCsl">{{stateCsl}}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="inputProject">Project</label>
        <select class="custom-select" id="inputProject" formControlName="project">
          <option disabled value=""></option>
          <option *ngFor="let project of properties.projects" [value]="project">{{project}}</option>
        </select>
      </div>
      <div class="form-group">
        <label for="inputProfile">Profile</label>
        <select class="custom-select" id="inputProfile" formControlName="profile">
          <option disabled value=""></option>
          <option *ngFor="let profile of properties.profiles" [value]="profile">{{profile}}</option>
        </select>
      </div>
      <div class="form-group un-sm">
        <label for="inputWorkflow">Workflow</label>
        <select class="custom-select" id="inputWorkflow" formControlName="workflow">
          <option disabled value=""></option>
          <option *ngFor="let workflow of properties.workflows" [value]="workflow">{{workflow}}</option>
        </select>
      </div>
      <div class="form-group un-sm un-md">
        <label for="inputTargetDate">Target Month</label>
        <select class="custom-select" id="inputTargetDate" formControlName="month">
          <option disabled value=""></option>
          <option *ngFor="let month of properties.targetDates" [value]="month">{{month}}</option>
        </select>
      </div>
      <div class="custom-slider un-sm">
        <label for="quantityBar">Quantity</label>
        <ng5-slider [(value)]="properties.minValueQuantity" [(highValue)]="properties.maxValueQuantity"
                    [options]="properties.optionsQuantity" id="quantityBar"
                    formControlName="quantityValues">
        </ng5-slider>
      </div>
      <div class="custom-slider un-sm">
        <label for="progressBar">Progress</label>
        <ng5-slider [(value)]="properties.minValueProgress" [(highValue)]="properties.maxValueProgress"
                    [options]="properties.optionsProgress" id="progressBar"
                    formControlName="progressValues">
        </ng5-slider>
      </div>

      <button class="btn btn-primary" type="submit">Filter</button>
      <button id="resetRequestTable" class="btn btn-secondary" type="button" (click)="resetForms()">
        Reset
      </button>
    </form>
  </div>
  <div class="mat-elevation-z8">
    <table mat-table [dataSource]="properties.dataSource">
      <caption style="display: none">All Requests</caption>
      <ng-container matColumnDef="Workflow">
        <th class="col-un-sm" mat-header-cell *matHeaderCellDef id="1"> Workflow</th>
        <td class="col-un-sm" mat-cell *matCellDef="let request"> {{request.workflow}} </td>
      </ng-container>

      <ng-container matColumnDef="Description">
        <th mat-header-cell *matHeaderCellDef id="2"> Description</th>
        <td mat-cell *matCellDef="let request"> {{request.description}} </td>
      </ng-container>

      <ng-container matColumnDef="Progress">
        <th class="col-un-sm" mat-header-cell *matHeaderCellDef id="3"> Progress</th>
        <td class="col-un-sm" mat-cell *matCellDef="let request">
          <ngb-progressbar
            type=" blue" textType="white" [value]="request.progress" [showValue]="true">
          </ngb-progressbar>
        </td>
      </ng-container>

      <ng-container matColumnDef="Project">
        <th mat-header-cell *matHeaderCellDef id="4"> Project</th>
        <td mat-cell *matCellDef="let request"> {{request.project}} </td>
      </ng-container>

      <ng-container matColumnDef="Quantity">
        <th class="col-un-sm" mat-header-cell *matHeaderCellDef id="5"> Quantity</th>
        <td class="col-un-sm" mat-cell *matCellDef="let request"> {{request.quantity}} </td>
      </ng-container>

      <ng-container matColumnDef="RequestDate">
        <th class="col-un-sm" mat-header-cell *matHeaderCellDef id="6"> Request Date</th>
        <td class="col-un-sm" mat-cell *matCellDef="let request"> {{request.requestDate}} </td>
      </ng-container>

      <ng-container matColumnDef="SkillCenter">
        <th class="col-un-sm col-un-md" mat-header-cell *matHeaderCellDef id="7"> Skill Center</th>
        <td class="col-un-sm col-un-md" mat-cell *matCellDef="let request"> {{request.skill}} </td>
      </ng-container>

      <ng-container matColumnDef="CSLState">
        <th class="col-un-sm col-un-md" mat-header-cell *matHeaderCellDef id="8"> CSL State</th>
        <td class="col-un-sm col-un-md" mat-cell *matCellDef="let request"> {{request.stateCsl}} </td>
      </ng-container>

      <ng-container matColumnDef="State">
        <th class="col-un-sm col-un-md" mat-header-cell *matHeaderCellDef id="9"> State</th>
        <td class="col-un-sm col-un-md" mat-cell *matCellDef="let request"> {{request.state}} </td>
      </ng-container>

      <ng-container matColumnDef="TargetDate">
        <th class="col-un-sm col-un-md" mat-header-cell *matHeaderCellDef id="10"> Target Date</th>
        <td class="col-un-sm col-un-md" mat-cell *matCellDef="let request"> {{request.targetDate}} </td>
      </ng-container>

      <ng-container matColumnDef="Profile">
        <th mat-header-cell *matHeaderCellDef id="11"> Profile</th>
        <td mat-cell *matCellDef="let request"> {{request.profile}} </td>
      </ng-container>

      <ng-container matColumnDef="DateToSendProfile">
        <th class="col-un-sm col-un-md" mat-header-cell *matHeaderCellDef id="12"> Date To Send Profile</th>
        <td *matCellDef="let request" class="col-un-sm col-un-md"
            mat-cell> {{request.dateToSendProfile || 'Not defined yet'}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          [routerLink]="['/request-detail', row.id]"
          [state]="{requestId: row.id}"
      ></tr>
    </table>

    <mat-paginator
      [length]="properties.listSize"
      [pageIndex]="0"
      [pageSize]="properties.DEFAULT_PAGE_SIZE"
      [pageSizeOptions]="[5, 10, 25, 50]"
      showFirstLastButtons>
    </mat-paginator>
  </div>
</div>
