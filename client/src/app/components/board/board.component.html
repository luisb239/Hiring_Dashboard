<div class="root">
  <div class="board table-responsive-xl">
    <div *ngFor="let workflow of properties.workflows" class="full-table">
      <table #tableContainer>
        <tr>
          <th [colSpan]=workflow.phases.length>
            <div class="workflow-header"><h3>{{workflow.workflow}}</h3></div>
          </th>
        </tr>
        <tr>
          <td *ngFor="let phase of workflow.phases">
            <div>
              <h4 class="phase">{{phase.name}}</h4>
            </div>
          </td>
        </tr>
      </table>
      <table *ngFor="let request of workflow.requests" [width]="tableContainer.offsetWidth">
        <tr [routerLink]="['/request-detail', request.id]">
          <td class="title-data swim-lane">
            <h5 class="swim-lane-title">{{request.description}}</h5>
          </td>
          <td [colSpan]=workflow.phases.length-1 class="fraction-data swim-lane">
            <h5 class="swim-lane-fraction">Placed: {{request.placedCandidates}}/{{request.quantity}}</h5>
          </td>
        </tr>
        <tr cdkDropListGroup>
          <td class="tasks-container"
              cdkDropList
              [width]="tableContainer.offsetWidth/request.phases.length"
              *ngFor="let phase of request.phases; index as i"
              [cdkDropListData]="phase.candidates"
              (cdkDropListDropped)="drop($event, request.id, phase.name)">
            <div class="task" *ngFor="let candidate of phase.candidates"
                 [cdkDragData]="candidate"
                 cdkDrag
                 (click)="onClick(candidate.id, request.id, phase.name)"><h6>{{ candidate.name }}</h6></div>
            <div class="hidden-task" *ngIf="i==0" (click)="addCandidate(request.id)">
              <div class="hidden-text"><h6><span>...</span></h6></div>
            </div>
          </td>
        </tr>
      </table>
    </div>
  </div>
</div>

